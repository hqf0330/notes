{"daily/202501w2":{"title":"202501w2 report","links":[],"tags":["daily"],"content":"what I have done!\n\n新用户承接的报表和数据迁移\n出问题啦，12.31后的数据不更新了，或者200000平台的埋点没上报\n人群圈选数据梳理，指标口径文档梳理\n"},"dataware/bitmap":{"title":"bitmap--the killer of User Profile System","links":[],"tags":["dataware","bitmap"],"content":"什么是bitmap\nBit-Map算法又名位图算法，其原理是，使用下标代替数值或特定的意义，使用这个位为0或者1代表特性是否存在\nBit-Map算法具有效率高，节省空间的特点，适用于对大量数据进行去重，查询等\n\n\n                  \n                  NOTE\n                  \n                \n\n对于某个标签，给出一个长度为n的数组，初始化都为0，如果来了一个用户或者一个用户符合当\n前标签，我们就将这个数组的某个位置置为1。基于当前标签进行统计某些值的时候就很快\n\n\n从案例来理解bitmap\n\n建立用户名和id的映射关系\n现在有标签宽表如下：\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNameSexAgeOccupationPhoneAmale90sDeviPhoneBmale90sdevSanCfemale00sstudentmi\n构建映射关系之后\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIDName1A2B3C\n\n将标签宽表使用bitmap进行拆分\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSexbitmapmale1, 2female3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAgebitmap90s1, 200s3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOccupationbitmapDev1, 2student3\n\n使用bitmap进行查询\n\nbitma的使用\nbitmap的存储\n如果用户id是int类型，那么就是有4 bytes, 32bit的存储开销，而在bitmap中，一个用户实际上也就只占来一个bit，内存开销直接节省32倍\nbitmap的使用\n\n\n                  \n                  TIP\n                  \n                \n\nbitmap在用户群做交集和并集运算的时候速度很快，主要是用位图异或计算\n\n\n我想计算是dev，并且使用iPhone的人群\n\n我想计算male 或 00s的人群\n\n由此可以发现，使用位进行计算的速度是非常快，计算的效率非常高\n我想计算 not 90s的人群\n从age的表中可以知道，90s只有AB两人，00s则有C一人。not 90s人群，也就是计算出C来。如果直接计算not 90s，这样就会导致一个问题，具体结果如下：\n\n\n                  \n                  IMPORTANT\n                  \n                \n\n直接计算不太可行，因此还要借助一个全量用户来进行辅助计算，90s XOR ALL = not 90s，也就是异或计算：相同为0，不同为1\n\n\nbitmap的优化"},"dataware/user_profile_system":{"title":"Let's us to talk about User Profile System","links":[],"tags":["dataware"],"content":"What is the User Profile System"},"index":{"title":"Welcome to Quartz","links":[],"tags":[],"content":"This is a blank Quartz installation.\nSee the documentation for how to get started.\nI am the toc of my notes!"}}